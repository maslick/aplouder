!function(){function s(e){this.callback=e.callback||null,this.id=e.id||"ap-file-input",this.inputFileEl=document.getElementById(this.id),this.unknown="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAABTVBMVEUAAAAAqv8AnOMAlOQAl+gAm+kAleoAmesAmOkAmukAmOkAmecAmucAmOcAmOgAmugAmegAmegAmOgAmegAmugAmekAmOkAmecAmucAmegAmegAmOgAmekAmukAmecAmegAmegAmegAmegAmegAmegAmegAmegAmegAmegAmegAmegAmegBmegCmugDmugEm+gFm+gHnOkInOkJnekOn+kao+ocpOsjp+skp+slqOsmqOsnqewoqewpqewtqusvq+syrOwzrew0rew1ruw2ruw3ruxDs+1EtO1Mt+5Rue5Xu++GzfKO0fOP0fOQ0fOR0vOS0vOT0/OU0/SV0/Sd1/Sk2fWl2vWm2vWn2/Wo2/Wp2/Wq3Pav3vay3/a44fe/5PfE5vjg8fnh8fri8vrj8vrk8vrn9Prr9frs9vvt9vvy+Pvz+Pv3+vz5+/z8/PzbC5gtAAAAK3RSTlMAAxITFhcYGVxdXl9gYWNljo+QkZKUlZaXmJmpqqvOz9DR6Onq6/Lz9Pr+b1G0hwAAAm1JREFUeAHt21dzUkEYh/GXE0VFgxpLoqACFiR7YjEWgxp7770XURNL3O9/6Y5ynIOvnuGZkd1c7HP7n53fLLeclayxtfVmy4y0VrNWSWSwVds6xkudqXLeXb/feKtdlazSZuO1iVIf9uw6uf87G+9VxbVin3+4XXbwdhOgSZGxTgi4k8g6E6SK7AgD16UZBt4le8PAu2U6DDwtJlDLHI5whCMc4QhHOMIRvjJfOM9dGxF89dvi+SK39/0GgIlr7ecL/5y7PWuBLMgtkLsfrCWyMNfJF/86n3IukgW4SlYukAW6ri+X1Hz6o7VQFuAqWblAFu46+fLAfOaTtVgW5mZyNzcfX/hzXrpOYODaRzMm1021uztjGLhABjBwqaxg4AIZwMAFMoCBy2X5Ty6WhbtchjB0oSzc5TKCuctk4S6XAcxdKgt3uTwEzF0uF8Cv1Nmls2bY5r6q02/TIeHDr9XZxXPDuj119t1RUwAzmbsaxjJ3AQxl7joYytwFMJa562AmY5fCXD4JXAUDWbnvketgLAMXwEAGLoCBDFwFc5m7Gubywjx3OWxm32j5RG4/BlwFwzu/PJSb04fAVTCSX+RdJz/groOhrF0n38eug7H8/KCa03vUdTCVnyk3k4nrYCRrN5PvMtfBTH6q3Ey+g1wHI/mJdn/Lt4GLYCc/PlAwp7eAi2BzZKZwTmeD/icR4QhHOMIRjnCEIxzhCIf76HdPGLgljTDwTqmHgetSCQOvliTUcwWZDAFvCfkkRar+4XH52Sbf7gb5VWnCr7uxJFnVtj+2PS65ylO+HtNtXSmDJZVaY9TPBxu1NUnm/QAjXOs62QO4CAAAAABJRU5ErkJggg==",this.Filez=[],this.numberOfFiles=0,this.slideNumber=null}s.aplouders=[],s.prototype.processFiles=function(e,n){for(var a=this,i=0;i<e.length;i++){var t=e[i];s.file2base64(t,function(t,l){s.scaleImage(l||a.unknown,120,120,function(e){var i={src:t,base64:l||a.unknown,thumb64:e,i:a.numberOfFiles++};s.drawImage(a.id,i),s.addSlide(a.id,i),a.Filez.push(i),null!=n&&n(i),a.initBrowseFilesButton()})})}},s.prototype.removeGallery=function(){document.querySelector("."+this.id+".ap-droparea > .ap-gallery").innerHTML="",document.querySelector("."+this.id+".ap-modal > .ap-modal-content").innerHTML="",this.Filez=[],this.numberOfFiles=0},s.prototype.initBrowseFilesButton=function(){var e=this;document.querySelector("."+e.id+".ap-droparea > .ap-message").onclick=function(){e.inputFileEl.click()}},s.prototype.init=function(){var i=this;s.aplouders.push(this);var e='<div class="ap-droparea '+this.id+'">\n   <div class="ap-message">\n      <svg class="ap-box-icon" xmlns="http://www.w3.org/2000/svg" width="50" height="43" viewBox="0 0 50 43"><path d="M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z"></path></svg>\n      <div><a href="#" class="ap-href"><strong>click</strong></a> to open the file Browser</div>\n   </div>\n   <div class="ap-gallery"></div>\n</div>\n<div class="ap-modal '+this.id+'" onclick="Aplouder.hideModal(\''+this.id+'\')">\n   <div class="ap-modal-content"></div>\n</div>';this.inputFileEl.insertAdjacentHTML("afterend",e),this.inputFileEl.style.width="0.1px",this.inputFileEl.style.height="0.1px",this.inputFileEl.style.opacity="0",this.inputFileEl.style.overflow="hidden",this.inputFileEl.style.position="absolute",this.inputFileEl.style.zIndex="-1",this.initBrowseFilesButton(),this.inputFileEl.addEventListener("change",function(e){i.removeGallery(),i.processFiles(this.files,i.callback)},!1),window.addEventListener("keydown",function(e){27===e.keyCode&&s.hideModal(i.id),37===e.keyCode&&function(){if(null!==i.slideNumber){var e=i.slideNumber-1;s.currentSlide(i.id,-1!==e?e:Object.keys(i.Filez).length-1)}}(),39===e.keyCode&&function(){if(null!==i.slideNumber){var e=i.slideNumber+1;e!==Object.keys(i.Filez).length?s.currentSlide(i.id,e):s.currentSlide(i.id,0)}}()},!1)},s.scaleImage=function(e,l,n,a){var s=new Image;s.crossOrigin="anonymous",s.onload=function(){var e=document.createElement("canvas"),i=e.getContext("2d");if(e.width=l,e.height=n,s.width===s.height)i.drawImage(this,0,0,l,n);else{var t=Math.min(s.width,s.height);s.width>s.height?i.drawImage(this,(s.width-t)/2,0,t,t,0,0,l,n):i.drawImage(this,0,(s.height-t)/2,t,t,0,0,l,n)}a(e.toDataURL("image/png"))},s.src=e},s.file2base64=function(i,t){var e=new FileReader;["image/gif","image/jpeg","image/png"].includes(i.type)?(e.onload=function(e){t(i,e.target.result)},e.readAsDataURL(i)):t(i,null)},s.drawImage=function(e,i){var t="Aplouder.openModal('"+e+"'); Aplouder.currentSlide('"+e+"', "+i.i+");";document.querySelector("."+e+".ap-droparea > .ap-gallery").innerHTML+='<div class="ap-preview">   <div class="ap-image">       <img src="'+i.thumb64+'">   </div>   <div class="ap-overlay" onclick="'+t+'">       <div class="ap-details">           <div class="ap-size">'+s.formatFileSize(i.src.size)+'           </div>           <div class="ap-name">'+i.src.name+"           </div>       </div>   </div></div>"},s.formatFileSize=function(e){return e<1e3?"< 1kB":1e3<=e&&e<=1e6?Math.round(e/1e3)+"kB":Math.round(e/1e6*10)/10+"Mb"},s.addSlide=function(e,i){document.querySelector("."+e+".ap-modal .ap-modal-content").innerHTML+='<div class="ap-slides">   <img src="'+i.base64+'">   <div class="ap-slide-name">'+i.src.name+'   </div>   <div class="ap-slide-size">'+s.formatFileSize(i.src.size)+"   </div></div>"},s.hideModal=function(i){document.querySelector("."+i+".ap-modal").style.display="none";for(var e=document.querySelectorAll("."+i+".ap-modal > .ap-modal-content > .ap-slides"),t=0;t<e.length;t++)e[t].style.display="none";document.getElementsByTagName("body")[0].style.overflow="auto",s.aplouders.filter(function(e){return e.id===i})[0].slideNumber=null},s.openModal=function(e){document.querySelector("."+e+".ap-modal").style.display="block",document.getElementsByTagName("body")[0].style.overflow="hidden"},s.currentSlide=function(i,e){for(var t=document.querySelectorAll("."+i+".ap-modal > .ap-modal-content > .ap-slides"),l=0;l<t.length;l++)t[l].style.display="none";t[e].style.display="block",s.aplouders.filter(function(e){return e.id===i})[0].slideNumber=e},"undefined"!=typeof module&&void 0!==module.exports?module.exports=s:window.Aplouder=s}();