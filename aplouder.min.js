(function(){class a{constructor(a){this.callback=a.callback||null,this.id=a.id||"ap-file-input",this.inputFileEl=document.getElementById(this.id),this.unknown="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAABTVBMVEUAAAAAqv8AnOMAlOQAl+gAm+kAleoAmesAmOkAmukAmOkAmecAmucAmOcAmOgAmugAmegAmegAmOgAmegAmugAmekAmOkAmecAmucAmegAmegAmOgAmekAmukAmecAmegAmegAmegAmegAmegAmegAmegAmegAmegAmegAmegAmegAmegBmegCmugDmugEm+gFm+gHnOkInOkJnekOn+kao+ocpOsjp+skp+slqOsmqOsnqewoqewpqewtqusvq+syrOwzrew0rew1ruw2ruw3ruxDs+1EtO1Mt+5Rue5Xu++GzfKO0fOP0fOQ0fOR0vOS0vOT0/OU0/SV0/Sd1/Sk2fWl2vWm2vWn2/Wo2/Wp2/Wq3Pav3vay3/a44fe/5PfE5vjg8fnh8fri8vrj8vrk8vrn9Prr9frs9vvt9vvy+Pvz+Pv3+vz5+/z8/PzbC5gtAAAAK3RSTlMAAxITFhcYGVxdXl9gYWNljo+QkZKUlZaXmJmpqqvOz9DR6Onq6/Lz9Pr+b1G0hwAAAm1JREFUeAHt21dzUkEYh/GXE0VFgxpLoqACFiR7YjEWgxp7770XURNL3O9/6Y5ynIOvnuGZkd1c7HP7n53fLLeclayxtfVmy4y0VrNWSWSwVds6xkudqXLeXb/feKtdlazSZuO1iVIf9uw6uf87G+9VxbVin3+4XXbwdhOgSZGxTgi4k8g6E6SK7AgD16UZBt4le8PAu2U6DDwtJlDLHI5whCMc4QhHOMIRvjJfOM9dGxF89dvi+SK39/0GgIlr7ecL/5y7PWuBLMgtkLsfrCWyMNfJF/86n3IukgW4SlYukAW6ri+X1Hz6o7VQFuAqWblAFu46+fLAfOaTtVgW5mZyNzcfX/hzXrpOYODaRzMm1021uztjGLhABjBwqaxg4AIZwMAFMoCBy2X5Ty6WhbtchjB0oSzc5TKCuctk4S6XAcxdKgt3uTwEzF0uF8Cv1Nmls2bY5r6q02/TIeHDr9XZxXPDuj119t1RUwAzmbsaxjJ3AQxl7joYytwFMJa562AmY5fCXD4JXAUDWbnvketgLAMXwEAGLoCBDFwFc5m7Gubywjx3OWxm32j5RG4/BlwFwzu/PJSb04fAVTCSX+RdJz/groOhrF0n38eug7H8/KCa03vUdTCVnyk3k4nrYCRrN5PvMtfBTH6q3Ey+g1wHI/mJdn/Lt4GLYCc/PlAwp7eAi2BzZKZwTmeD/icR4QhHOMIRjnCEIxzhCIf76HdPGLgljTDwTqmHgetSCQOvliTUcwWZDAFvCfkkRar+4XH52Sbf7gb5VWnCr7uxJFnVtj+2PS65ylO+HtNtXSmDJZVaY9TPBxu1NUnm/QAjXOs62QO4CAAAAABJRU5ErkJggg==",this.Filez=[],this.numberOfFiles=0,this.slideNumber=null}init(){function b(){if(null!==d.slideNumber){const b=d.slideNumber-1;-1==b?a.currentSlide(d.id,Object.keys(d.Filez).length-1):a.currentSlide(d.id,b)}}function c(){if(null!==d.slideNumber){const b=d.slideNumber+1;b===Object.keys(d.Filez).length?a.currentSlide(d.id,0):a.currentSlide(d.id,b)}}let d=this;a.aplouders.push(this);const e=`<div class="ap-droparea ${this.id}">\n`+"   <div class=\"ap-message\">\n      <svg class=\"ap-box-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"50\" height=\"43\" viewBox=\"0 0 50 43\"><path d=\"M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z\"></path></svg>\n      <div><a href=\"#\" class=\"ap-href\"><strong>click</strong></a> to open the file Browser</div>\n   </div>\n   <div class=\"ap-gallery\"></div>\n</div>\n"+`<div class="ap-modal ${this.id}" onclick="Aplouder.hideModal('${this.id}')">\n`+"   <div class=\"ap-modal-content\"></div>\n</div>";this.inputFileEl.insertAdjacentHTML("afterend",e),this.inputFileEl.style.width="0.1px",this.inputFileEl.style.height="0.1px",this.inputFileEl.style.opacity="0",this.inputFileEl.style.overflow="hidden",this.inputFileEl.style.position="absolute",this.inputFileEl.style.zIndex="-1",this.initBrowseFilesButton(),this.inputFileEl.addEventListener("change",function(){d.removeGallery(),d.processFiles(this.files,d.callback)},!1),window.addEventListener("keydown",function(f){27===f.keyCode&&a.hideModal(d.id),37===f.keyCode&&b(),39===f.keyCode&&c()},!1)}processFiles(b,c){let d=this;for(let e,f=0;f<b.length;f++)e=b[f],a.file2base64(e,function(b,e){a.scaleImage(e||d.unknown,120,120,function(f){const g={src:b,base64:e||d.unknown,thumb64:f,i:d.numberOfFiles++};a.drawImage(d.id,g),a.addSlide(d.id,g),d.Filez.push(g),null!=c&&c(g),d.initBrowseFilesButton()})})}removeGallery(){document.querySelector(`.${this.id}.ap-droparea > .ap-gallery`).innerHTML="",document.querySelector(`.${this.id}.ap-modal > .ap-modal-content`).innerHTML="",this.Filez=[],this.numberOfFiles=0}initBrowseFilesButton(){let a=this;document.querySelector(`.${this.id}.ap-droparea > .ap-message`).onclick=function(){a.inputFileEl.click()}}static scaleImage(a,b,c,d){let e=new Image;e.crossOrigin="anonymous",e.onload=function(){var a=Math.min,f=document.createElement("canvas"),g=f.getContext("2d");if(f.width=b,f.height=c,e.width===e.height)g.drawImage(this,0,0,b,c);else{let d=a(e.width,e.height);e.width>e.height?g.drawImage(this,(e.width-d)/2,0,d,d,0,0,b,c):g.drawImage(this,0,(e.height-d)/2,d,d,0,0,b,c)}d(f.toDataURL("image/png"))},e.src=a}static file2base64(a,b){let c=new FileReader;["image/gif","image/jpeg","image/png"].includes(a.type)?(c.onload=function(c){b(a,c.target.result)},c.readAsDataURL(a)):b(a,null)}static drawImage(b,c){let d=`Aplouder.openModal('${b}'); Aplouder.currentSlide('${b}', ${c.i});`;document.querySelector(`.${b}.ap-droparea > .ap-gallery`).innerHTML+="<div class=\"ap-preview\">   <div class=\"ap-image\">       <img src=\""+c.thumb64+"\">   </div>   <div class=\"ap-overlay\" onclick=\""+d+"\">       <div class=\"ap-details\">           <div class=\"ap-size\">"+a.formatFileSize(c.src.size)+"           </div>           <div class=\"ap-name\">"+c.src.name+"           </div>       </div>   </div></div>"}static formatFileSize(a){var b=Math.round;return 1e3>a?"< 1kB":1e3<=a&&1000000>=a?b(a/1e3)+"kB":b(10*(a/1e6))/10+"Mb"}static addSlide(b,c){document.querySelector(`.${b}.ap-modal .ap-modal-content`).innerHTML+="<div class=\"ap-slides\">   <img src=\""+c.base64+"\">   <div class=\"ap-slide-name\">"+c.src.name+"   </div>   <div class=\"ap-slide-size\">"+a.formatFileSize(c.src.size)+"   </div></div>"}static hideModal(b){document.querySelector(`.${b}.ap-modal`).style.display="none";let c=document.querySelectorAll(`.${b}.ap-modal > .ap-modal-content > .ap-slides`);for(let a=0;a<c.length;a++)c[a].style.display="none";document.getElementsByTagName("body")[0].style.overflow="auto",a.aplouders.filter(a=>a.id===b)[0].slideNumber=null}static openModal(a){document.querySelector(`.${a}.ap-modal`).style.display="block",document.getElementsByTagName("body")[0].style.overflow="hidden"}static currentSlide(b,c){let d=document.querySelectorAll(`.${b}.ap-modal > .ap-modal-content > .ap-slides`);for(let a=0;a<d.length;a++)d[a].style.display="none";d[c].style.display="block",a.aplouders.filter(a=>a.id===b)[0].slideNumber=c}}a.aplouders=[],"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a:window.Aplouder=a})();