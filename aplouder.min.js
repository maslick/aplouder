function Aplouder(e){this.callback=e.callback||null,this.id=e.id||"ap-file-input",this.inputFileEl=document.getElementById(this.id),this.unknown="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAABTVBMVEUAAAAAqv8AnOMAlOQAl+gAm+kAleoAmesAmOkAmukAmOkAmecAmucAmOcAmOgAmugAmegAmegAmOgAmegAmugAmekAmOkAmecAmucAmegAmegAmOgAmekAmukAmecAmegAmegAmegAmegAmegAmegAmegAmegAmegAmegAmegAmegAmegBmegCmugDmugEm+gFm+gHnOkInOkJnekOn+kao+ocpOsjp+skp+slqOsmqOsnqewoqewpqewtqusvq+syrOwzrew0rew1ruw2ruw3ruxDs+1EtO1Mt+5Rue5Xu++GzfKO0fOP0fOQ0fOR0vOS0vOT0/OU0/SV0/Sd1/Sk2fWl2vWm2vWn2/Wo2/Wp2/Wq3Pav3vay3/a44fe/5PfE5vjg8fnh8fri8vrj8vrk8vrn9Prr9frs9vvt9vvy+Pvz+Pv3+vz5+/z8/PzbC5gtAAAAK3RSTlMAAxITFhcYGVxdXl9gYWNljo+QkZKUlZaXmJmpqqvOz9DR6Onq6/Lz9Pr+b1G0hwAAAm1JREFUeAHt21dzUkEYh/GXE0VFgxpLoqACFiR7YjEWgxp7770XURNL3O9/6Y5ynIOvnuGZkd1c7HP7n53fLLeclayxtfVmy4y0VrNWSWSwVds6xkudqXLeXb/feKtdlazSZuO1iVIf9uw6uf87G+9VxbVin3+4XXbwdhOgSZGxTgi4k8g6E6SK7AgD16UZBt4le8PAu2U6DDwtJlDLHI5whCMc4QhHOMIRvjJfOM9dGxF89dvi+SK39/0GgIlr7ecL/5y7PWuBLMgtkLsfrCWyMNfJF/86n3IukgW4SlYukAW6ri+X1Hz6o7VQFuAqWblAFu46+fLAfOaTtVgW5mZyNzcfX/hzXrpOYODaRzMm1021uztjGLhABjBwqaxg4AIZwMAFMoCBy2X5Ty6WhbtchjB0oSzc5TKCuctk4S6XAcxdKgt3uTwEzF0uF8Cv1Nmls2bY5r6q02/TIeHDr9XZxXPDuj119t1RUwAzmbsaxjJ3AQxl7joYytwFMJa562AmY5fCXD4JXAUDWbnvketgLAMXwEAGLoCBDFwFc5m7Gubywjx3OWxm32j5RG4/BlwFwzu/PJSb04fAVTCSX+RdJz/groOhrF0n38eug7H8/KCa03vUdTCVnyk3k4nrYCRrN5PvMtfBTH6q3Ey+g1wHI/mJdn/Lt4GLYCc/PlAwp7eAi2BzZKZwTmeD/icR4QhHOMIRjnCEIxzhCIf76HdPGLgljTDwTqmHgetSCQOvliTUcwWZDAFvCfkkRar+4XH52Sbf7gb5VWnCr7uxJFnVtj+2PS65ylO+HtNtXSmDJZVaY9TPBxu1NUnm/QAjXOs62QO4CAAAAABJRU5ErkJggg==",this.Filez=[],this.numberOfFiles=0,this.slideNumber=null}Aplouder.aplouders=[],Aplouder.prototype.processFiles=function(e,i){for(var l=this,t=0;t<e.length;t++){var n=e[t];Aplouder.file2base64(n,function(e,t){Aplouder.scaleImage(t||l.unknown,120,120,function(n){var d={src:e,base64:t||l.unknown,thumb64:n,i:l.numberOfFiles++};Aplouder.drawImage(l.id,d),Aplouder.addSlide(l.id,d),l.Filez.push(d),null!=i&&i(d),l.initBrowseFilesButton()})})}},Aplouder.prototype.removeGallery=function(){document.querySelector("."+this.id+".ap-droparea > .ap-gallery").innerHTML="",document.querySelector("."+this.id+".ap-modal > .ap-modal-content").innerHTML="",this.Filez=[],this.numberOfFiles=0},Aplouder.prototype.initBrowseFilesButton=function(){var e=this;document.querySelector("."+e.id+".ap-droparea > .ap-message").onclick=function(){e.inputFileEl.click()}},Aplouder.prototype.init=function(){var e=this;Aplouder.aplouders.push(this);var i='<div class="ap-droparea '+this.id+'">\n   <div class="ap-message">\n      <svg class="ap-box-icon" xmlns="http://www.w3.org/2000/svg" width="50" height="43" viewBox="0 0 50 43"><path d="M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z"></path></svg>\n      <div><a href="#" class="ap-href"><strong>click</strong></a> to open the file Browser</div>\n   </div>\n   <div class="ap-gallery"></div>\n</div>\n<div class="ap-modal '+this.id+'" onclick="Aplouder.hideModal(\''+this.id+'\')">\n   <div class="ap-modal-content"></div>\n</div>';this.inputFileEl.insertAdjacentHTML("afterend",i),this.inputFileEl.style.width="0.1px",this.inputFileEl.style.height="0.1px",this.inputFileEl.style.opacity="0",this.inputFileEl.style.overflow="hidden",this.inputFileEl.style.position="absolute",this.inputFileEl.style.zIndex="-1",this.initBrowseFilesButton(),this.inputFileEl.addEventListener("change",function(i){e.removeGallery(),e.processFiles(this.files,e.callback)},!1),window.addEventListener("keydown",function(i){27===i.keyCode&&Aplouder.hideModal(e.id),37===i.keyCode&&function(){if(null!==e.slideNumber){var i=e.slideNumber-1;-1!==i?Aplouder.currentSlide(e.id,i):Aplouder.currentSlide(e.id,Object.keys(e.Filez).length-1)}}(),39===i.keyCode&&function(){if(null!==e.slideNumber){var i=e.slideNumber+1;i!==Object.keys(e.Filez).length?Aplouder.currentSlide(e.id,i):Aplouder.currentSlide(e.id,0)}}()},!1)},Aplouder.scaleImage=function(e,i,l,t){var n=new Image;n.crossOrigin="anonymous",n.onload=function(){var e=document.createElement("canvas"),d=e.getContext("2d");if(e.width=i,e.height=l,n.width===n.height)d.drawImage(this,0,0,i,l);else{var a=Math.min(n.width,n.height);n.width>n.height?d.drawImage(this,(n.width-a)/2,0,a,a,0,0,i,l):d.drawImage(this,0,(n.height-a)/2,a,a,0,0,i,l)}t(e.toDataURL("image/png"))},n.src=e},Aplouder.file2base64=function(e,i){var l=new FileReader;["image/gif","image/jpeg","image/png"].includes(e.type)?(l.onload=function(l){i(e,l.target.result)},l.readAsDataURL(e)):i(e,null)},Aplouder.drawImage=function(e,i){var l="Aplouder.openModal('"+e+"'); Aplouder.currentSlide('"+e+"', "+i.i+");";document.querySelector("."+e+".ap-droparea > .ap-gallery").innerHTML+='<div class="ap-preview">   <div class="ap-image">       <img src="'+i.thumb64+'">   </div>   <div class="ap-overlay" onclick="'+l+'">       <div class="ap-details">           <div class="ap-size">'+Aplouder.formatFileSize(i.src.size)+'           </div>           <div class="ap-name">'+i.src.name+"           </div>       </div>   </div></div>"},Aplouder.formatFileSize=function(e){return e<1e3?"< 1kB":e>=1e3&&e<=1e6?Math.round(e/1e3)+"kB":Math.round(e/1e6*10)/10+"Mb"},Aplouder.addSlide=function(e,i){document.querySelector("."+e+".ap-modal .ap-modal-content").innerHTML+='<div class="ap-slides">   <img src="'+i.base64+'">   <div class="ap-slide-name">'+i.src.name+'   </div>   <div class="ap-slide-size">'+Aplouder.formatFileSize(i.src.size)+"   </div></div>"},Aplouder.hideModal=function(e){document.querySelector("."+e+".ap-modal").style.display="none";for(var i=document.querySelectorAll("."+e+".ap-modal > .ap-modal-content > .ap-slides"),l=0;l<i.length;l++)i[l].style.display="none";document.getElementsByTagName("body")[0].style.overflow="auto",Aplouder.aplouders.filter(function(i){return i.id===e})[0].slideNumber=null},Aplouder.openModal=function(e){document.querySelector("."+e+".ap-modal").style.display="block",document.getElementsByTagName("body")[0].style.overflow="hidden"},Aplouder.currentSlide=function(e,i){for(var l=document.querySelectorAll("."+e+".ap-modal > .ap-modal-content > .ap-slides"),t=0;t<l.length;t++)l[t].style.display="none";l[i].style.display="block",Aplouder.aplouders.filter(function(i){return i.id===e})[0].slideNumber=i};